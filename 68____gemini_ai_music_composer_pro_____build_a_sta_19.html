<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gemini AI Music Composer Pro - Professional AI-assisted music composition tool">
    <title>Gemini AI Music Composer Pro</title>
    <style>
        :root {
            --primary-color: #6200ee;
            --primary-dark: #3700b3;
            --secondary-color: #03dac6;
            --background-color: #f5f5f5;
            --surface-color: #ffffff;
            --error-color: #b00020;
            --text-primary: #000000;
            --text-secondary: #757575;
            --border-radius: 4px;
            --box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--background-color);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            box-shadow: var(--box-shadow);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .logo {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            font-weight: bold;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem;
            border-radius: var(--border-radius);
        }

        nav ul li a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        main {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 2rem;
        }

        .sidebar {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
            height: fit-content;
        }

        .main-content {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--box-shadow);
        }

        h1, h2, h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .section-title {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(98, 0, 238, 0.2);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .composer-tools {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .tool-card {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            padding: 1rem;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tool-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .composition-container {
            margin-top: 2rem;
        }

        .composition-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .composition-title {
            font-size: 1.25rem;
            font-weight: 500;
        }

        .composition-actions {
            display: flex;
            gap: 0.5rem;
        }

        .piano-roll {
            height: 300px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .timeline {
            height: 300px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            overflow-x: auto;
            overflow-y: hidden;
        }

        .track {
            height: 50px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            padding: 0 1rem;
        }

        .track:last-child {
            border-bottom: none;
        }

        .track-name {
            width: 100px;
            font-weight: 500;
        }

        .track-content {
            flex: 1;
            height: 100%;
            position: relative;
        }

        .note {
            position: absolute;
            background-color: var(--primary-color);
            border-radius: var(--border-radius);
            height: 80%;
            cursor: pointer;
            transition: var(--transition);
        }

        .note:hover {
            background-color: var(--primary-dark);
            transform: scale(1.05);
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(98, 0, 238, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .error-message {
            color: var(--error-color);
            margin-top: 0.5rem;
            font-size: 0.875rem;
        }

        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 1rem;
            margin-top: auto;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }

            nav ul {
                display: none;
            }

            .composer-tools {
                grid-template-columns: 1fr;
            }

            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">Gemini AI Music Composer Pro</div>
            <nav>
                <ul>
                    <li><a href="#">Dashboard</a></li>
                    <li><a href="#">Projects</a></li>
                    <li><a href="#">Templates</a></li>
                    <li><a href="#">Settings</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="dashboard">
            <aside class="sidebar">
                <h2 class="section-title">Composer Tools</h2>
                <div class="composer-tools">
                    <div class="tool-card" data-tool="melody">
                        <div class="tool-icon">🎵</div>
                        <h3>Melody Generator</h3>
                        <p>Generate AI-assisted melodies with different styles and moods.</p>
                    </div>
                    <div class="tool-card" data-tool="chords">
                        <div class="tool-icon">🎹</div>
                        <h3>Chord Progression</h3>
                        <p>Create harmonious chord progressions for your compositions.</p>
                    </div>
                    <div class="tool-card" data-tool="orchestration">
                        <div class="tool-icon">🎻</div>
                        <h3>Orchestration</h3>
                        <p>Arrange your music with different instruments and textures.</p>
                    </div>
                    <div class="tool-card" data-tool="sound-design">
                        <div class="tool-icon">🎚️</div>
                        <h3>Sound Design</h3>
                        <p>Enhance your tracks with effects, filters, and processing.</p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="project-name">Project Name</label>
                    <input type="text" id="project-name" placeholder="Enter project name">
                </div>

                <div class="form-group">
                    <label for="tempo">Tempo (BPM)</label>
                    <input type="number" id="tempo" min="40" max="240" value="120">
                </div>

                <div class="form-group">
                    <label for="time-signature">Time Signature</label>
                    <select id="time-signature">
                        <option value="4/4">4/4</option>
                        <option value="3/4">3/4</option>
                        <option value="6/8">6/8</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="key">Key</label>
                    <select id="key">
                        <option value="C Major">C Major</option>
                        <option value="G Major">G Major</option>
                        <option value="D Major">D Major</option>
                        <option value="A Major">A Major</option>
                        <option value="E Major">E Major</option>
                        <option value="B Major">B Major</option>
                        <option value="F# Major">F# Major</option>
                        <option value="C# Major">C# Major</option>
                        <option value="F Major">F Major</option>
                        <option value="Bb Major">Bb Major</option>
                        <option value="Eb Major">Eb Major</option>
                        <option value="Ab Major">Ab Major</option>
                        <option value="Db Major">Db Major</option>
                        <option value="Gb Major">Gb Major</option>
                        <option value="Cb Major">Cb Major</option>
                        <option value="A Minor">A Minor</option>
                        <option value="E Minor">E Minor</option>
                        <option value="B Minor">B Minor</option>
                        <option value="F# Minor">F# Minor</option>
                        <option value="C# Minor">C# Minor</option>
                        <option value="G# Minor">G# Minor</option>
                        <option value="D# Minor">D# Minor</option>
                        <option value="A# Minor">A# Minor</option>
                        <option value="F Minor">F Minor</option>
                        <option value="C Minor">C Minor</option>
                        <option value="G Minor">G Minor</option>
                        <option value="D Minor">D Minor</option>
                        <option value="Bb Minor">Bb Minor</option>
                        <option value="Eb Minor">Eb Minor</option>
                    </select>
                </div>

                <button id="generate-music">Generate Music</button>
                <div id="error-message" class="error-message"></div>
            </aside>

            <div class="main-content">
                <h2 class="section-title">Composition</h2>

                <div class="composition-container" id="composition-container">
                    <div class="composition-header">
                        <div class="composition-title">Untitled Project</div>
                        <div class="composition-actions">
                            <button id="play-btn">Play</button>
                            <button id="stop-btn" disabled>Stop</button>
                            <button id="save-btn">Save</button>
                            <button id="export-btn">Export</button>
                        </div>
                    </div>

                    <div class="piano-roll" id="piano-roll"></div>

                    <div class="timeline" id="timeline">
                        <div class="track">
                            <div class="track-name">Drums</div>
                            <div class="track-content" id="drums-track"></div>
                        </div>
                        <div class="track">
                            <div class="track-name">Bass</div>
                            <div class="track-content" id="bass-track"></div>
                        </div>
                        <div class="track">
                            <div class="track-name">Piano</div>
                            <div class="track-content" id="piano-track"></div>
                        </div>
                        <div class="track">
                            <div class="track-name">Strings</div>
                            <div class="track-content" id="strings-track"></div>
                        </div>
                    </div>
                </div>

                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2023 Gemini AI Music Composer Pro. All rights reserved.</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.min.js"></script>
    <script>
        // Initialize Tone.js
        Tone.start();

        // DOM Elements
        const generateMusicBtn = document.getElementById('generate-music');
        const playBtn = document.getElementById('play-btn');
        const stopBtn = document.getElementById('stop-btn');
        const saveBtn = document.getElementById('save-btn');
        const exportBtn = document.getElementById('export-btn');
        const loadingElement = document.getElementById('loading');
        const errorMessageElement = document.getElementById('error-message');
        const projectNameInput = document.getElementById('project-name');
        const tempoInput = document.getElementById('tempo');
        const timeSignatureSelect = document.getElementById('time-signature');
        const keySelect = document.getElementById('key');
        const compositionTitle = document.querySelector('.composition-title');
        const pianoRoll = document.getElementById('piano-roll');
        const drumsTrack = document.getElementById('drums-track');
        const bassTrack = document.getElementById('bass-track');
        const pianoTrack = document.getElementById('piano-track');
        const stringsTrack = document.getElementById('strings-track');
        const toolCards = document.querySelectorAll('.tool-card');

        // State
        let currentComposition = null;
        let isPlaying = false;
        let currentTool = null;

        // Event Listeners
        generateMusicBtn.addEventListener('click', generateMusic);
        playBtn.addEventListener('click', togglePlay);
        stopBtn.addEventListener('click', stopPlayback);
        saveBtn.addEventListener('click', saveProject);
        exportBtn.addEventListener('click', exportProject);
        projectNameInput.addEventListener('input', updateProjectName);

        toolCards.forEach(card => {
            card.addEventListener('click', () => {
                currentTool = card.dataset.tool;
                toolCards.forEach(c => c.classList.remove('active'));
                card.classList.add('active');
            });
        });

        // Functions
        async function generateMusic() {
            showLoading(true);
            errorMessageElement.textContent = '';

            try {
                // Simulate API call to Gemini's text generation API
                await new Promise(resolve => setTimeout(resolve, 2000));

                // Generate random music data for demonstration
                const musicData = generateRandomMusicData();

                // Update UI with generated music
                updateComposition(musicData);

                // Play the generated music
                await playComposition(musicData);
            } catch (error) {
                console.error('Error generating music:', error);
                errorMessageElement.textContent = 'Failed to generate music. Please try again.';
            } finally {
                showLoading(false);
            }
        }

        function generateRandomMusicData() {
            const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
            const octaves = [3, 4, 5];
            const durations = ['8n', '4n', '2n'];

            const musicData = {
                projectName: projectNameInput.value || 'Untitled Project',
                tempo: parseInt(tempoInput.value),
                timeSignature: timeSignatureSelect.value,
                key: keySelect.value,
                tracks: [
                    {
                        name: 'Drums',
                        notes: generateRandomNotes(16, notes, octaves, durations, true)
                    },
                    {
                        name: 'Bass',
                        notes: generateRandomNotes(16, notes, octaves, durations)
                    },
                    {
                        name: 'Piano',
                        notes: generateRandomNotes(16, notes, octaves, durations)
                    },
                    {
                        name: 'Strings',
                        notes: generateRandomNotes(16, notes, octaves, durations)
                    }
                ]
            };

            return musicData;
        }

        function generateRandomNotes(count, notes, octaves, durations, isDrums = false) {
            const randomNotes = [];

            for (let i = 0; i < count; i++) {
                if (isDrums) {
                    // For drums, we'll use simple patterns
                    const drumNotes = ['C3', 'D3', 'E3', 'F3'];
                    const note = drumNotes[Math.floor(Math.random() * drumNotes.length)];
                    const duration = durations[Math.floor(Math.random() * durations.length)];
                    const time = i * 0.5;

                    randomNotes.push({ note, duration, time });
                } else {
                    const note = notes[Math.floor(Math.random() * notes.length)];
                    const octave = octaves[Math.floor(Math.random() * octaves.length)];
                    const duration = durations[Math.floor(Math.random() * durations.length)];
                    const time = i * 0.5;

                    randomNotes.push({ note: `${note}${octave}`, duration, time });
                }
            }

            return randomNotes;
        }

        function updateComposition(musicData) {
            currentComposition = musicData;
            compositionTitle.textContent = musicData.projectName;

            // Clear existing notes
            drumsTrack.innerHTML = '';
            bassTrack.innerHTML = '';
            pianoTrack.innerHTML = '';
            stringsTrack.innerHTML = '';

            // Add notes to tracks
            musicData.tracks.forEach(track => {
                const trackElement = document.getElementById(`${track.name.toLowerCase().replace(' ', '-')}-track`);

                track.notes.forEach(note => {
                    const noteElement = document.createElement('div');
                    noteElement.className = 'note';
                    noteElement.style.left = `${note.time * 100}px`;
                    noteElement.style.width = `${getNoteWidth(note.duration)}px`;

                    // Add click event to play the note
                    noteElement.addEventListener('click', () => playNote(note.note, note.duration));

                    trackElement.appendChild(noteElement);
                });
            });

            // Update piano roll (simplified for this example)
            pianoRoll.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                const row = document.createElement('div');
                row.style.height = '25px';
                row.style.borderBottom = '1px solid #eee';
                pianoRoll.appendChild(row);
            }
        }

        function getNoteWidth(duration) {
            const durationMap = {
                '8n': 25,
                '4n': 50,
                '2n': 100
            };
            return durationMap[duration] || 50;
        }

        async function playComposition(musicData) {
            isPlaying = true;
            playBtn.textContent = 'Pause';
            stopBtn.disabled = false;

            // Create Tone.js parts for each track
            const parts = musicData.tracks.map(track => {
                const part = new Tone.Part((time, note) => {
                    const synth = track.name === 'Drums'
                        ? new Tone.MembraneSynth().toDestination()
                        : new Tone.Synth().toDestination();

                    synth.triggerAttackRelease(note.note, note.duration, time);
                }, track.notes.map(note => [note.time, note]));

                part.loop = true;
                part.loopEnd = '8m';
                return part;
            });

            // Start all parts
            Tone.Transport.bpm.value = musicData.tempo;
            parts.forEach(part => part.start(0));
            Tone.Transport.start();

            // Update play button when transport stops
            Tone.Transport.on('stop', () => {
                isPlaying = false;
                playBtn.textContent = 'Play';
                stopBtn.disabled = true;
            });
        }

        function togglePlay() {
            if (isPlaying) {
                Tone.Transport.pause();
                playBtn.textContent = 'Play';
            } else {
                if (!currentComposition) {
                    errorMessageElement.textContent = 'Please generate music first.';
                    return;
                }

                if (Tone.Transport.state === 'paused') {
                    Tone.Transport.start();
                } else {
                    playComposition(currentComposition);
                }
                playBtn.textContent = 'Pause';
            }
        }

        function stopPlayback() {
            Tone.Transport.stop();
            isPlaying = false;
            playBtn.textContent = 'Play';
            stopBtn.disabled = true;
        }

        function playNote(note, duration) {
            const synth = new Tone.Synth().toDestination();
            synth.triggerAttackRelease(note, duration);
        }

        function saveProject() {
            if (!currentComposition) {
                errorMessageElement.textContent = 'No composition to save.';
                return;
            }

            // In a real app, you would save to a database or local storage
            console.log('Saving project:', currentComposition);
            alert('Project saved successfully!');
        }

        function exportProject() {
            if (!currentComposition) {
                errorMessageElement.textContent = 'No composition to export.';
                return;
            }

            // In a real app, you would generate an actual audio file
            console.log('Exporting project:', currentComposition);
            alert('Project exported successfully!');
        }

        function updateProjectName() {
            if (currentComposition) {
                currentComposition.projectName = projectNameInput.value;
                compositionTitle.textContent = currentComposition.projectName;
            }
        }

        function showLoading(show) {
            loadingElement.style.display = show ? 'flex' : 'none';
            generateMusicBtn.disabled = show;
        }

        // Initialize
        projectNameInput.value = 'My New Project';
        updateProjectName();
    </script>
</body>
</html>