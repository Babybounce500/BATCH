<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perplexity Web Research Assistant Pro</title>
    <meta name="description" content="Advanced web research tool using Perplexity's search API">
    <style>
        :root {
            --primary-color: #4a6bff;
            --secondary-color: #ff6b4a;
            --background-color: #f5f7ff;
            --text-color: #333;
            --light-text: #fff;
            --card-bg: #fff;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: grid;
            grid-template-rows: auto 1fr auto;
        }

        header {
            background-color: var(--card-bg);
            box-shadow: var(--box-shadow);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }

        .logo-icon {
            margin-right: 0.5rem;
            font-size: 1.5em;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 1.5rem;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem;
            border-radius: var(--border-radius);
        }

        nav ul li a:hover {
            color: var(--primary-color);
            background-color: rgba(74, 107, 255, 0.1);
        }

        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
            width: 100%;
        }

        .search-container {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .search-form {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 1rem;
        }

        .search-input {
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 107, 255, 0.2);
        }

        .search-button {
            background-color: var(--primary-color);
            color: var(--light-text);
            border: none;
            border-radius: var(--border-radius);
            padding: 0 2rem;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-button:hover {
            background-color: #3a5bef;
            transform: translateY(-2px);
        }

        .search-button:active {
            transform: translateY(0);
        }

        .search-button-icon {
            margin-left: 0.5rem;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .option-card {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .option-card.active {
            border: 2px solid var(--primary-color);
            transform: translateY(-5px);
        }

        .option-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .option-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .option-description {
            font-size: 0.9rem;
            color: #666;
        }

        .results-container {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            margin-top: 2rem;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .results-actions {
            display: flex;
            gap: 1rem;
        }

        .action-button {
            background-color: var(--primary-color);
            color: var(--light-text);
            border: none;
            border-radius: var(--border-radius);
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
        }

        .action-button:hover {
            background-color: #3a5bef;
        }

        .action-button-icon {
            margin-right: 0.5rem;
        }

        .result-item {
            border-bottom: 1px solid #eee;
            padding: 1.5rem 0;
        }

        .result-item:last-child {
            border-bottom: none;
        }

        .result-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            cursor: pointer;
            transition: var(--transition);
        }

        .result-title:hover {
            text-decoration: underline;
        }

        .result-url {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .result-snippet {
            margin-bottom: 1rem;
        }

        .result-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: #666;
        }

        .result-source {
            display: flex;
            align-items: center;
        }

        .result-source-icon {
            margin-right: 0.3rem;
        }

        .result-date {
            display: flex;
            align-items: center;
        }

        .result-date-icon {
            margin-right: 0.3rem;
        }

        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 2rem;
        }

        .page-button {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            padding: 0.5rem 1rem;
            margin: 0 0.25rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .page-button:hover {
            background-color: var(--primary-color);
            color: var(--light-text);
            border-color: var(--primary-color);
        }

        .page-button.active {
            background-color: var(--primary-color);
            color: var(--light-text);
            border-color: var(--primary-color);
        }

        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
            display: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .close-button:hover {
            color: var(--primary-color);
        }

        .modal-body {
            margin-bottom: 1.5rem;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        .modal-button {
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .primary-button {
            background-color: var(--primary-color);
            color: var(--light-text);
            border: none;
        }

        .primary-button:hover {
            background-color: #3a5bef;
        }

        .secondary-button {
            background-color: transparent;
            color: var(--text-color);
            border: 1px solid #ddd;
        }

        .secondary-button:hover {
            background-color: #f5f5f5;
        }

        .citation-container {
            background-color: #f8f9fa;
            border-left: 3px solid var(--primary-color);
            padding: 1rem;
            margin: 1rem 0;
            font-family: monospace;
            white-space: pre-wrap;
        }

        footer {
            background-color: var(--card-bg);
            padding: 2rem;
            text-align: center;
            margin-top: 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .footer-links a {
            text-decoration: none;
            color: var(--text-color);
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        .copyright {
            color: #666;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }

            nav ul {
                flex-direction: column;
                align-items: center;
                gap: 0.5rem;
            }

            nav ul li {
                margin: 0;
            }

            .search-form {
                grid-template-columns: 1fr;
            }

            .search-button {
                width: 100%;
            }

            .options-container {
                grid-template-columns: 1fr;
            }

            .results-header {
                flex-direction: column;
                gap: 1rem;
            }

            .results-actions {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body x-data="{
    searchQuery: '',
    searchType: 'web',
    isLoading: false,
    searchResults: [],
    currentPage: 1,
    itemsPerPage: 5,
    showModal: false,
    modalContent: {},
    generateCitation: function(result) {
        let citation = '';
        switch(this.searchType) {
            case 'web':
                citation = `${result.title}. Retrieved from ${result.url}`;
                break;
            case 'news':
                citation = `${result.title}. ${result.source.name}. ${new Date(result.publishedAt).toLocaleDateString()}. Retrieved from ${result.url}`;
                break;
            case 'scholar':
                citation = `${result.authors ? result.authors.join(', ') + '. ' : ''}${result.title}. ${result.journal ? result.journal + '. ' : ''}${result.year ? result.year + '. ' : ''}${result.url}`;
                break;
            case 'images':
                citation = `${result.alt_description || 'Image'}. Retrieved from ${result.urls.full}`;
                break;
        }
        return citation;
    },
    openModal: function(result) {
        this.modalContent = result;
        this.showModal = true;
    },
    closeModal: function() {
        this.showModal = false;
        this.modalContent = {};
    },
    performSearch: async function() {
        this.isLoading = true;
        this.searchResults = [];

        // Simulate API call with setTimeout
        await new Promise(resolve => setTimeout(resolve, 1500));

        // Generate mock results based on search type
        const mockResults = [];
        const resultCount = Math.floor(Math.random() * 10) + 5;

        for (let i = 0; i < resultCount; i++) {
            const mockResult = {
                id: i + 1,
                title: `Result ${i + 1} for "${this.searchQuery}"`,
                url: `https://example.com/result-${i + 1}`,
                snippet: `This is a mock result snippet for the search query "${this.searchQuery}". It provides some information about the topic.`,
                source: `Source ${i + 1}`,
                date: new Date(Date.now() - Math.floor(Math.random() * 30) * 24 * 60 * 60 * 1000).toLocaleDateString(),
                citation: ''
            };

            // Add type-specific properties
            switch(this.searchType) {
                case 'web':
                    mockResult.type = 'web';
                    break;
                case 'news':
                    mockResult.type = 'news';
                    mockResult.source = {
                        name: `News Source ${i + 1}`,
                        url: `https://news.example.com/source-${i + 1}`
                    };
                    mockResult.publishedAt = new Date(Date.now() - Math.floor(Math.random() * 30) * 24 * 60 * 60 * 1000).toISOString();
                    break;
                case 'scholar':
                    mockResult.type = 'scholar';
                    mockResult.authors = [`Author ${i + 1}`, `Author ${i + 2}`];
                    mockResult.journal = `Journal of ${this.searchQuery}`;
                    mockResult.year = 2020 + Math.floor(Math.random() * 4);
                    break;
                case 'images':
                    mockResult.type = 'images';
                    mockResult.alt_description = `Image ${i + 1} description`;
                    mockResult.urls = {
                        full: `https://example.com/image-${i + 1}.jpg`,
                        thumb: `https://example.com/image-${i + 1}-thumb.jpg`
                    };
                    break;
            }

            mockResults.push(mockResult);
        }

        this.searchResults = mockResults;
        this.currentPage = 1;
        this.isLoading = false;
    },
    exportResults: function() {
        const resultsToExport = this.searchResults.map(result => ({
            title: result.title,
            url: result.url,
            snippet: result.snippet,
            source: result.source,
            date: result.date,
            citation: this.generateCitation(result)
        }));

        const dataStr = JSON.stringify(resultsToExport, null, 2);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

        const exportFileDefaultName = 'research_results.json';

        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
    },
    get paginatedResults() {
        const startIndex = (this.currentPage - 1) * this.itemsPerPage;
        const endIndex = startIndex + this.itemsPerPage;
        return this.searchResults.slice(startIndex, endIndex);
    },
    totalPages: function() {
        return Math.ceil(this.searchResults.length / this.itemsPerPage);
    },
    goToPage: function(page) {
        if (page >= 1 && page <= this.totalPages()) {
            this.currentPage = page;
        }
    }
}" x-init="() => {
    // Initialize Alpine.js data
}">
    <header>
        <div class="header-container">
            <div class="logo">
                <span class="logo-icon">🔍</span>
                <span>Perplexity Pro</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#" x-on:click.prevent="searchType = 'web'">Web</a></li>
                    <li><a href="#" x-on:click.prevent="searchType = 'news'">News</a></li>
                    <li><a href="#" x-on:click.prevent="searchType = 'scholar'">Scholar</a></li>
                    <li><a href="#" x-on:click.prevent="searchType = 'images'">Images</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section class="search-container">
            <form class="search-form" x-on:submit.prevent="performSearch">
                <input type="text" class="search-input" placeholder="Enter your research query..." x-model="searchQuery" required>
                <button type="submit" class="search-button" :disabled="isLoading">
                    <span>Search</span>
                    <span class="search-button-icon">🔍</span>
                </button>
            </form>

            <div class="options-container">
                <div class="option-card" :class="{ 'active': searchType === 'web' }" x-on:click="searchType = 'web'">
                    <div class="option-icon">🌐</div>
                    <div class="option-title">Web Search</div>
                    <div class="option-description">Search the entire web for comprehensive information</div>
                </div>

                <div class="option-card" :class="{ 'active': searchType === 'news' }" x-on:click="searchType = 'news'">
                    <div class="option-icon">📰</div>
                    <div class="option-title">News Search</div>
                    <div class="option-description">Find the latest news and articles on your topic</div>
                </div>

                <div class="option-card" :class="{ 'active': searchType === 'scholar' }" x-on:click="searchType = 'scholar'">
                    <div class="option-icon">📚</div>
                    <div class="option-title">Scholar Search</div>
                    <div class="option-description">Search academic journals and research papers</div>
                </div>

                <div class="option-card" :class="{ 'active': searchType === 'images' }" x-on:click="searchType = 'images'">
                    <div class="option-icon">🖼️</div>
                    <div class="option-title">Image Search</div>
                    <div class="option-description">Find high-quality images related to your query</div>
                </div>
            </div>
        </section>

        <div class="loading-spinner" x-show="isLoading"></div>

        <section class="results-container" x-show="searchResults.length > 0" x-cloak>
            <div class="results-header">
                <h2 class="results-title">Search Results</h2>
                <div class="results-actions">
                    <button class="action-button" x-on:click="exportResults">
                        <span class="action-button-icon">📤</span>
                        <span>Export</span>
                    </button>
                    <button class="action-button" x-on:click="openModal({ title: 'Research Methodology', content: 'This is a detailed explanation of the research methodology used in this search.' })">
                        <span class="action-button-icon">📊</span>
                        <span>Methodology</span>
                    </button>
                </div>
            </div>

            <template x-for="result in paginatedResults" :key="result.id">
                <div class="result-item">
                    <template x-if="result.type === 'images'">
                        <div>
                            <h3 class="result-title" x-text="result.alt_description || 'Image'" x-on:click="openModal(result)"></h3>
                            <img :src="result.urls.thumb" :alt="result.alt_description || 'Image'" style="max-width: 200px; margin: 1rem 0;">
                            <div class="result-meta">
                                <div class="result-source">
                                    <span class="result-source-icon">🔗</span>
                                    <span x-text="result.urls.full"></span>
                                </div>
                            </div>
                        </div>
                    </template>
                    <template x-if="result.type !== 'images'">
                        <div>
                            <h3 class="result-title" x-text="result.title" x-on:click="openModal(result)"></h3>
                            <a :href="result.url" class="result-url" x-text="result.url" target="_blank"></a>
                            <p class="result-snippet" x-text="result.snippet"></p>
                            <div class="result-meta">
                                <div class="result-source">
                                    <span class="result-source-icon">📰</span>
                                    <span x-text="result.type === 'news' ? result.source.name : result.source"></span>
                                </div>
                                <div class="result-date">
                                    <span class="result-date-icon">📅</span>
                                    <span x-text="result.date"></span>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </template>

            <div class="pagination">
                <template x-for="page in totalPages()" :key="page">
                    <button class="page-button" :class="{ 'active': currentPage === page }" x-text="page" x-on:click="goToPage(page)"></button>
                </template>
            </div>
        </section>
    </main>

    <div class="modal" x-show="showModal" x-cloak>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" x-text="modalContent.title"></h3>
                <button class="close-button" x-on:click="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <template x-if="modalContent.type === 'images'">
                    <div>
                        <img :src="modalContent.urls.full" :alt="modalContent.alt_description || 'Image'" style="max-width: 100%; margin-bottom: 1rem;">
                        <p x-text="modalContent.alt_description"></p>
                    </div>
                </template>
                <template x-if="modalContent.type !== 'images' && modalContent.content">
                    <div x-html="modalContent.content"></div>
                </template>
                <template x-if="modalContent.type !== 'images' && !modalContent.content">
                    <div>
                        <h4>Full Details</h4>
                        <p><strong>Title:</strong> <span x-text="modalContent.title"></span></p>
                        <template x-if="modalContent.type === 'news'">
                            <p><strong>Source:</strong> <a :href="modalContent.source.url" x-text="modalContent.source.name" target="_blank"></a></p>
                            <p><strong>Published:</strong> <span x-text="new Date(modalContent.publishedAt).toLocaleDateString()"></span></p>
                        </template>
                        <template x-if="modalContent.type === 'scholar'">
                            <p><strong>Authors:</strong> <span x-text="modalContent.authors.join(', ')"></span></p>
                            <p><strong>Journal:</strong> <span x-text="modalContent.journal"></span></p>
                            <p><strong>Year:</strong> <span x-text="modalContent.year"></span></p>
                        </template>
                        <p><strong>URL:</strong> <a :href="modalContent.url" x-text="modalContent.url" target="_blank"></a></p>
                        <p><strong>Snippet:</strong> <span x-text="modalContent.snippet"></span></p>
                        <div class="citation-container">
                            <h4>Citation</h4>
                            <pre x-text="generateCitation(modalContent)"></pre>
                        </div>
                    </div>
                </template>
            </div>
            <div class="modal-footer">
                <button class="modal-button secondary-button" x-on:click="closeModal">Close</button>
                <button class="modal-button primary-button" x-on:click="exportResults">Export Results</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">Privacy</a>
                <a href="#">Terms</a>
                <a href="#">Contact</a>
            </div>
            <p class="copyright">&copy; 2023 Perplexity Web Research Assistant Pro. All rights reserved.</p>
        </div>
    </footer>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>
        // Alpine.js is loaded from CDN
        // Additional JavaScript functionality can be added here
    </script>
</body>
</html>